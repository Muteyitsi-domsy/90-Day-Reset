<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>90-Day Identity Reset</title>

  <!-- Security Headers: Content Security Policy (CSP) -->
  <!-- This is a fallback; primary CSP is set via HTTP headers in vercel.json -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://aistudiocdn.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https: blob:; font-src 'self' data: https:; connect-src 'self' https://*.googleapis.com https://*.firebase.com https://*.firebaseio.com https://sentry.io https://*.sentry.io https://emailjs.com https://api.emailjs.com; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'none';">

  <!-- Additional Security Headers -->
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <style>
    :root, .theme-default {
      --bg-from: #fdfbf7; --bg-to: #f4f1ea;
      --text-primary: #344e41; --text-secondary: #3a5a40;
      --accent-primary: #588157; --accent-primary-hover: #3a5a40; --accent-secondary: #a3b18a;
      --card-bg: rgba(255, 255, 255, 0.7); --card-bg-opaque: rgb(255, 255, 255); --card-border: #ffffff; --card-bg-secondary: #f4f1ea;
      --button-secondary-bg: #e9ede7; --button-secondary-text: #3a5a40;
      --input-bg: rgba(255, 255, 255, 0.5); --input-border: #ffffff; --ring-color: #a3b18a;
    }
    .dark, .dark.theme-default {
      --bg-from: #111827; --bg-to: #1f2937;
      --text-primary: #d1d5db; --text-secondary: #6ee7b7;
      --accent-primary: #588157; --accent-primary-hover: #3a5a40; --accent-secondary: #6ee7b7;
      --card-bg: rgba(31, 41, 55, 0.7); --card-bg-opaque: rgb(31, 41, 55); --card-border: #4b5563; --card-bg-secondary: rgba(55, 65, 81, 0.5);
      --button-secondary-bg: rgba(75, 85, 99, 0.5); --button-secondary-text: #6ee7b7;
      --input-bg: rgba(55, 65, 81, 0.5); --input-border: #4b5563; --ring-color: #6ee7b7;
    }
    .theme-ocean {
      --bg-from: #f0f9ff; --bg-to: #ecfeff;
      --text-primary: #075985; --text-secondary: #0891b2;
      --accent-primary: #0ea5e9; --accent-primary-hover: #0284c7; --accent-secondary: #22d3ee;
      --card-bg: rgba(255, 255, 255, 0.7); --card-bg-opaque: rgb(255, 255, 255); --card-border: #ffffff; --card-bg-secondary: #e0f2fe;
      --button-secondary-bg: #e0f2fe; --button-secondary-text: #0ea5e9;
      --input-bg: rgba(255, 255, 255, 0.5); --input-border: #ffffff; --ring-color: #0ea5e9;
    }
    .dark.theme-ocean {
      --bg-from: #0c1a2e; --bg-to: #112b3e;
      --text-primary: #e0f2fe; --text-secondary: #67e8f9;
      --accent-primary: #38bdf8; --accent-primary-hover: #0ea5e9; --accent-secondary: #67e8f9;
      --card-bg: rgba(14, 23, 43, 0.7); --card-bg-opaque: rgb(14, 23, 43); --card-border: #1e40af; --card-bg-secondary: rgba(3, 7, 18, 0.5);
      --button-secondary-bg: rgba(30, 64, 175, 0.3); --button-secondary-text: #7dd3fc;
      --input-bg: rgba(14, 23, 43, 0.5); --input-border: #1e40af; --ring-color: #38bdf8;
    }
    .theme-sunset {
      --bg-from: #fff7ed; --bg-to: #fff1f2;
      --text-primary: #86198f; --text-secondary: #c2410c;
      --accent-primary: #f97316; --accent-primary-hover: #ea580c; --accent-secondary: #f472b6;
      --card-bg: rgba(255, 255, 255, 0.7); --card-bg-opaque: rgb(255, 255, 255); --card-border: #ffffff; --card-bg-secondary: #fee2e2;
      --button-secondary-bg: #ffedd5; --button-secondary-text: #f97316;
      --input-bg: rgba(255, 255, 255, 0.5); --input-border: #ffffff; --ring-color: #f97316;
    }
    .dark.theme-sunset {
      --bg-from: #260e1d; --bg-to: #2c0e2b;
      --text-primary: #fce7f3; --text-secondary: #fdba74;
      --accent-primary: #fb923c; --accent-primary-hover: #f97316; --accent-secondary: #f472b6;
      --card-bg: rgba(38, 14, 29, 0.7); --card-bg-opaque: rgb(38, 14, 29); --card-border: #86198f; --card-bg-secondary: rgba(59, 7, 100, 0.2);
      --button-secondary-bg: rgba(134, 25, 143, 0.2); --button-secondary-text: #f0abfc;
      --input-bg: rgba(38, 14, 29, 0.5); --input-border: #86198f; --ring-color: #fb923c;
    }
     .theme-forest {
      --bg-from: #f5f5f4; --bg-to: #f1f5f9;
      --text-primary: #1c1917; --text-secondary: #1a2e05;
      --accent-primary: #44403c; --accent-primary-hover: #292524; --accent-secondary: #57534e;
      --card-bg: rgba(255, 255, 255, 0.7); --card-bg-opaque: rgb(255, 255, 255); --card-border: #ffffff; --card-bg-secondary: #e7e5e4;
      --button-secondary-bg: #e7e5e4; --button-secondary-text: #44403c;
      --input-bg: rgba(255, 255, 255, 0.5); --input-border: #ffffff; --ring-color: #a8a29e;
    }
    .dark.theme-forest {
      --bg-from: #1c1917; --bg-to: #0c1a0c;
      --text-primary: #d6d3d1; --text-secondary: #a3e635;
      --accent-primary: #a8a29e; --accent-primary-hover: #d6d3d1; --accent-secondary: #bef264;
      --card-bg: rgba(28, 25, 23, 0.7); --card-bg-opaque: rgb(28, 25, 23); --card-border: #44403c; --card-bg-secondary: rgba(26, 46, 5, 0.2);
      --button-secondary-bg: rgba(68, 64, 60, 0.5); --button-secondary-text: #d6d3d1;
      --input-bg: rgba(28, 25, 23, 0.5); --input-border: #44403c; --ring-color: #a8a29e;
    }

    /* Background gradient using CSS variables for reliable theme application */
    html {
      min-height: 100vh;
      background: linear-gradient(to bottom right, var(--bg-from), var(--bg-to));
      background-attachment: fixed;
    }

    body {
      min-height: 100vh;
      background: transparent;
    }
  </style>
  <script>
    // Prevents FOUC by applying the theme before the body renders.
    (function() {
      try {
        const settingsJSON = localStorage.getItem('settings');
        if (settingsJSON) {
            const settings = JSON.parse(settingsJSON);
            let themeName = settings.theme || 'default';
            // Migration for old theme setting
            if (themeName === 'light' || themeName === 'dark' || themeName === 'system') {
                themeName = 'default';
            }
            let themeMode = settings.themeMode || settings.theme || 'system';

            document.documentElement.classList.add(`theme-${themeName}`);

            if (themeMode === 'dark' || (themeMode === 'system' && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            }
        } else {
            document.documentElement.classList.add('theme-default');
            if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
        }
      } catch (e) {
        console.error('Failed to apply theme settings on load', e);
        document.documentElement.classList.add('theme-default');
      }
    })();
  </script>
<script type="importmap">
{
  "imports": {
    "react": "https://aistudiocdn.com/react@^19.2.0",
    "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
    "react/": "https://aistudiocdn.com/react@^19.2.0/",
    "@google/genai": "https://aistudiocdn.com/@google/genai@^1.28.0"
  }
}
</script>
</head>
<body class="font-sans">
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>
</html>